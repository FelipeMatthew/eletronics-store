{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Administrator\\\\Desktop\\\\apiconsume\\\\src\\\\pages\\\\Alunos\\\\index.js\";\nimport React, { useEffect, useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport { get } from 'lodash';\nimport { FaUserCircle, FaEdit, FaWindowClose, FaExclamation } from 'react-icons/fa';\nimport { toast } from 'react-toastify';\nimport { Container } from '../../styles/GlobalStyles';\nimport { StudentContainer, NewStudent, ProfilePicture } from './styled';\nimport { notLogged } from '../../config/colors';\nimport Loading from '../../components/Loading';\nimport axios from '../../services/axios';\nexport default function Alunos() {\n  const [alunos, setAlunos] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n  useEffect(() => {\n    async function getData() {\n      setIsLoading(true);\n      const response = await axios.get('/alunos');\n      setAlunos(response.data);\n      setIsLoading(false);\n    }\n\n    getData();\n  }, []);\n\n  const handleDeleteAsk = e => {\n    e.preventDefault();\n    const exclamation = e.currentTarget.nextSibling;\n    e.currentTarget.remove();\n    exclamation.setAttribute('display', 'block');\n  };\n\n  const handleDelete = async (e, id, index) => {\n    e.persist();\n\n    try {\n      setIsLoading(true);\n      await axios.delete(`alunos/${id}`); // Ta pegando o aluno e o array e ta pegando apenas o index passado por parametro\n\n      const newAlunos = [...alunos];\n      newAlunos.splice(index, 1);\n      setAlunos(newAlunos);\n      setIsLoading(false);\n      toast.success('Aluno removido com sucesso');\n    } catch (err) {\n      const status = get(err, 'response.status', []);\n\n      if (status === 401) {\n        toast.error('Você precisa fazer login para ter acesso');\n      } else {\n        toast.error('Ocorreu um error ao excluir aluno');\n      }\n\n      setIsLoading(false);\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Loading, {\n    isLoading: isLoading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }\n  }, \"Alunos\"), /*#__PURE__*/React.createElement(NewStudent, {\n    to: \"/aluno/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }\n  }, \"Cadastrar novo aluno\"), /*#__PURE__*/React.createElement(StudentContainer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }\n  }, alunos.map((aluno, index) => /*#__PURE__*/React.createElement(\"div\", {\n    key: String(aluno.id),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(ProfilePicture, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 13\n    }\n  }, get(aluno, 'Fotos[0].url', false) ? /*#__PURE__*/React.createElement(\"img\", {\n    src: aluno.Fotos[0].url,\n    alt: \"Profile_picture\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 17\n    }\n  }) : /*#__PURE__*/React.createElement(FaUserCircle, {\n    size: 36,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }\n  }, aluno.nome), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 13\n    }\n  }, aluno.email), /*#__PURE__*/React.createElement(Link, {\n    to: `/aluno/${aluno.id}/edit`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(FaEdit, {\n    size: 16,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(Link, {\n    onClick: handleDeleteAsk,\n    to: `/aluno/${aluno.id}/delete`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(FaWindowClose, {\n    size: 16,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(FaExclamation, {\n    onClick: e => handleDelete(e, aluno.id, index),\n    size: 16,\n    display: \"none\",\n    cursor: \"pointer\",\n    color: notLogged,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 13\n    }\n  })))));\n}","map":{"version":3,"sources":["C:/Users/Administrator/Desktop/apiconsume/src/pages/Alunos/index.js"],"names":["React","useEffect","useState","Link","get","FaUserCircle","FaEdit","FaWindowClose","FaExclamation","toast","Container","StudentContainer","NewStudent","ProfilePicture","notLogged","Loading","axios","Alunos","alunos","setAlunos","isLoading","setIsLoading","getData","response","data","handleDeleteAsk","e","preventDefault","exclamation","currentTarget","nextSibling","remove","setAttribute","handleDelete","id","index","persist","delete","newAlunos","splice","success","err","status","error","map","aluno","String","Fotos","url","nome","email"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport { get } from 'lodash';\nimport {\n  FaUserCircle,\n  FaEdit,\n  FaWindowClose,\n  FaExclamation,\n} from 'react-icons/fa';\n\nimport { toast } from 'react-toastify';\nimport { Container } from '../../styles/GlobalStyles';\nimport { StudentContainer, NewStudent, ProfilePicture } from './styled';\nimport { notLogged } from '../../config/colors';\nimport Loading from '../../components/Loading';\nimport axios from '../../services/axios';\n\nexport default function Alunos() {\n  const [alunos, setAlunos] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n\n  useEffect(() => {\n    async function getData() {\n      setIsLoading(true);\n      const response = await axios.get('/alunos');\n      setAlunos(response.data);\n      setIsLoading(false);\n    }\n    getData();\n  }, []);\n\n  const handleDeleteAsk = (e) => {\n    e.preventDefault();\n    const exclamation = e.currentTarget.nextSibling;\n    e.currentTarget.remove();\n    exclamation.setAttribute('display', 'block');\n  };\n\n  const handleDelete = async (e, id, index) => {\n    e.persist();\n    try {\n      setIsLoading(true);\n      await axios.delete(`alunos/${id}`);\n      // Ta pegando o aluno e o array e ta pegando apenas o index passado por parametro\n      const newAlunos = [...alunos];\n      newAlunos.splice(index, 1);\n      setAlunos(newAlunos);\n      setIsLoading(false);\n      toast.success('Aluno removido com sucesso');\n    } catch (err) {\n      const status = get(err, 'response.status', []);\n      if (status === 401) {\n        toast.error('Você precisa fazer login para ter acesso');\n      } else {\n        toast.error('Ocorreu um error ao excluir aluno');\n      }\n      setIsLoading(false);\n    }\n  };\n  return (\n    <Container>\n      <Loading isLoading={isLoading} />\n\n      <h1>Alunos</h1>\n\n      <NewStudent to=\"/aluno/\">Cadastrar novo aluno</NewStudent>\n\n      <StudentContainer>\n        {alunos.map((aluno, index) => (\n          <div key={String(aluno.id)}>\n            <ProfilePicture>\n              {get(aluno, 'Fotos[0].url', false) ? (\n                <img src={aluno.Fotos[0].url} alt=\"Profile_picture\" />\n              ) : (\n                <FaUserCircle size={36} />\n              )}\n            </ProfilePicture>\n\n            <span>{aluno.nome}</span>\n            <span>{aluno.email}</span>\n\n            <Link to={`/aluno/${aluno.id}/edit`}>\n              <FaEdit size={16} />\n            </Link>\n\n            <Link onClick={handleDeleteAsk} to={`/aluno/${aluno.id}/delete`}>\n              <FaWindowClose size={16} />\n            </Link>\n\n            <FaExclamation\n              onClick={(e) => handleDelete(e, aluno.id, index)}\n              size={16}\n              display=\"none\"\n              cursor=\"pointer\"\n              color={notLogged}\n            />\n          </div>\n        ))}\n      </StudentContainer>\n    </Container>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}